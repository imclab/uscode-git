   In a habeas corpus proceeding before a circuit or district judge, the final order shall be subject to review, on appeal, by the court of appeals for the circuit where the proceeding is had.
   There shall be no right of appeal from such an order in a proceeding to test the validity of a warrant to remove, to another district or place for commitment or trial, a person charged with a criminal offense against the United States, or to test the validity of his detention pending removal proceedings.
   An appeal may not be taken to the court of appeals from the final order in a habeas corpus proceeding where the detention complained of arises out of process issued by a State court, unless the justice or judge who rendered the order or a circuit justice or judge issues a certificate of probable cause.
